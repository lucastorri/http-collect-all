<html>

  <head>

    <script src="//cdnjs.cloudflare.com/ajax/libs/headjs/0.99/head.load.min.js"></script>

    <style type="text/css">
      .axis path,
      .axis line {
        fill: none;
        stroke: black;
        shape-rendering: crispEdges;
      }

      .axis text {
        font-family: sans-serif;
        font-size: 10px;
      }

      .timeline-label {
        font-family: sans-serif;
        font-size: 12px;
      }
      
      #timeline {
        width: 100%;
      }

    </style>

    <script>

      var har = {"log":{"version":"1.2","creator":{"name":"","version":"","comment":""},"browser":{"name":"","version":"","comment":""},"pages":[{"startedDateTime":"2013-05-31T20:25:11.053Z","id":"test","title":"http-collector bucket #n","pageTimings":{"onContentLoad":0,"onLoad":0,"comment":""},"comment":""}],"entries":[{"pageref":"test","startedDateTime":"2013-05-31T20:25:11.053Z","time":204,"request":{"method":"GET","url":"https://www.google.com:443/","httpVersion":"HTTP/1.1","cookies":[],"headers":[{"name":"user-agent","value":"curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5"},{"name":"accept","value":"*/*"},{"name":"host","value":"www.google.com"}],"queryString":[],"headersSize":0,"bodySize":0,"comment":""},"response":{"status":"302","statusText":"Found","httpVersion":"HTTP/1.1","cookies":["PREF=ID=99acfddace625a39:FF=0:TM=1370031911:LM=1370031911:S=D18am5s355mB58cE; expires=Sun, 31-May-2015 20:25:11 GMT; path=/; domain=.google.com","NID=67=C_XBmcGHeFvP8F5uVVWVMtNTX3dMJhEy0RNF9J7Bi16G5GzGinqpWz3vrjSoHhNcHiLR8zjrmt0QJQQCTrjtxKUnL_QNj9zCZ_VW5IgZgXQOz8KiZ7O6HGUE4w9ewmT9; expires=Sat, 30-Nov-2013 20:25:11 GMT; path=/; domain=.google.com; HttpOnly"],"headers":[{"name":"location","value":"https://www.google.de/"},{"name":"cache-control","value":"private"},{"name":"content-type","value":"text/html; charset=UTF-8"},{"name":"set-cookie","value":"PREF=ID=99acfddace625a39:FF=0:TM=1370031911:LM=1370031911:S=D18am5s355mB58cE; expires=Sun, 31-May-2015 20:25:11 GMT; path=/; domain=.google.com"},{"name":"set-cookie","value":"NID=67=C_XBmcGHeFvP8F5uVVWVMtNTX3dMJhEy0RNF9J7Bi16G5GzGinqpWz3vrjSoHhNcHiLR8zjrmt0QJQQCTrjtxKUnL_QNj9zCZ_VW5IgZgXQOz8KiZ7O6HGUE4w9ewmT9; expires=Sat, 30-Nov-2013 20:25:11 GMT; path=/; domain=.google.com; HttpOnly"},{"name":"p3p","value":"CP=\"This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info.\""},{"name":"date","value":"Fri, 31 May 2013 20:25:11 GMT"},{"name":"server","value":"gws"},{"name":"content-length","value":"219"},{"name":"x-xss-protection","value":"1; mode=block"},{"name":"x-frame-options","value":"SAMEORIGIN"}],"content":{"size":219,"mimeType":"text/html; charset=UTF-8","text":"<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>302 Moved</TITLE></HEAD><BODY>\n<H1>302 Moved</H1>\nThe document has moved\n<A HREF=\"https://www.google.de/\">here</A>.\r\n</BODY></HTML>\r\n"},"redirectURL":"","headersSize":0,"bodySize":219,"comment":""},"cache":{},"timings":{"blocked":0,"dns":-1,"connect":0,"send":102,"wait":0,"receive":102,"ssl":0,"comment":""},"serverIPAddress":"10.0.0.1","connection":"1370031911015455000","comment":""},{"pageref":"test","startedDateTime":"2013-05-31T20:25:12.620Z","time":109,"request":{"method":"GET","url":"https://www.google.com:443/","httpVersion":"HTTP/1.1","cookies":[],"headers":[{"name":"user-agent","value":"curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5"},{"name":"accept","value":"*/*"},{"name":"host","value":"www.google.com"}],"queryString":[],"headersSize":0,"bodySize":0,"comment":""},"response":{"status":"302","statusText":"Found","httpVersion":"HTTP/1.1","cookies":["PREF=ID=f2e7254ec8e1b4ba:FF=0:TM=1370031912:LM=1370031912:S=OaIRlnnCREja1Vej; expires=Sun, 31-May-2015 20:25:12 GMT; path=/; domain=.google.com","NID=67=jM99HRFQhGlDwasnpL844PmZHCNfnuoWWWL-v_aYNiv1TTjxg5TrhuqQTonW0rMsjUNqFwhI2lGbhmzhAKUSAefpoHHnLykRzu0-_eJ3WjYiEcxAH2FwwuVBip3gs6Fm; expires=Sat, 30-Nov-2013 20:25:12 GMT; path=/; domain=.google.com; HttpOnly"],"headers":[{"name":"location","value":"https://www.google.de/"},{"name":"cache-control","value":"private"},{"name":"content-type","value":"text/html; charset=UTF-8"},{"name":"set-cookie","value":"PREF=ID=f2e7254ec8e1b4ba:FF=0:TM=1370031912:LM=1370031912:S=OaIRlnnCREja1Vej; expires=Sun, 31-May-2015 20:25:12 GMT; path=/; domain=.google.com"},{"name":"set-cookie","value":"NID=67=jM99HRFQhGlDwasnpL844PmZHCNfnuoWWWL-v_aYNiv1TTjxg5TrhuqQTonW0rMsjUNqFwhI2lGbhmzhAKUSAefpoHHnLykRzu0-_eJ3WjYiEcxAH2FwwuVBip3gs6Fm; expires=Sat, 30-Nov-2013 20:25:12 GMT; path=/; domain=.google.com; HttpOnly"},{"name":"p3p","value":"CP=\"This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info.\""},{"name":"date","value":"Fri, 31 May 2013 20:25:12 GMT"},{"name":"server","value":"gws"},{"name":"content-length","value":"219"},{"name":"x-xss-protection","value":"1; mode=block"},{"name":"x-frame-options","value":"SAMEORIGIN"}],"content":{"size":219,"mimeType":"text/html; charset=UTF-8","text":"<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>302 Moved</TITLE></HEAD><BODY>\n<H1>302 Moved</H1>\nThe document has moved\n<A HREF=\"https://www.google.de/\">here</A>.\r\n</BODY></HTML>\r\n"},"redirectURL":"","headersSize":0,"bodySize":219,"comment":""},"cache":{},"timings":{"blocked":0,"dns":-1,"connect":0,"send":54,"wait":0,"receive":54,"ssl":0,"comment":""},"serverIPAddress":"10.0.0.1","connection":"1370031912618749000","comment":""},{"pageref":"test","startedDateTime":"2013-05-31T20:25:11.870Z","time":141,"request":{"method":"GET","url":"https://www.google.com:443/","httpVersion":"HTTP/1.1","cookies":[],"headers":[{"name":"user-agent","value":"curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5"},{"name":"accept","value":"*/*"},{"name":"host","value":"www.google.com"}],"queryString":[],"headersSize":0,"bodySize":0,"comment":""},"response":{"status":"302","statusText":"Found","httpVersion":"HTTP/1.1","cookies":["PREF=ID=370399d88656d2a7:FF=0:TM=1370031911:LM=1370031911:S=8gdrcbxqz_4s-T9s; expires=Sun, 31-May-2015 20:25:11 GMT; path=/; domain=.google.com","NID=67=eYIosqJHB_q5CWs3lXFx8acE_cx11SFjqhV0H9pub8l77HVA5nV6Klxfd6gxSS4xm6RN6zAL8kZtXkJlMzd6xekeDWeyZryu5CPcH_yrGsqurbKy4u6hxK99Z_G9_QwY; expires=Sat, 30-Nov-2013 20:25:11 GMT; path=/; domain=.google.com; HttpOnly"],"headers":[{"name":"location","value":"https://www.google.de/"},{"name":"cache-control","value":"private"},{"name":"content-type","value":"text/html; charset=UTF-8"},{"name":"set-cookie","value":"PREF=ID=370399d88656d2a7:FF=0:TM=1370031911:LM=1370031911:S=8gdrcbxqz_4s-T9s; expires=Sun, 31-May-2015 20:25:11 GMT; path=/; domain=.google.com"},{"name":"set-cookie","value":"NID=67=eYIosqJHB_q5CWs3lXFx8acE_cx11SFjqhV0H9pub8l77HVA5nV6Klxfd6gxSS4xm6RN6zAL8kZtXkJlMzd6xekeDWeyZryu5CPcH_yrGsqurbKy4u6hxK99Z_G9_QwY; expires=Sat, 30-Nov-2013 20:25:11 GMT; path=/; domain=.google.com; HttpOnly"},{"name":"p3p","value":"CP=\"This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info.\""},{"name":"date","value":"Fri, 31 May 2013 20:25:11 GMT"},{"name":"server","value":"gws"},{"name":"content-length","value":"219"},{"name":"x-xss-protection","value":"1; mode=block"},{"name":"x-frame-options","value":"SAMEORIGIN"}],"content":{"size":219,"mimeType":"text/html; charset=UTF-8","text":"<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>302 Moved</TITLE></HEAD><BODY>\n<H1>302 Moved</H1>\nThe document has moved\n<A HREF=\"https://www.google.de/\">here</A>.\r\n</BODY></HTML>\r\n"},"redirectURL":"","headersSize":0,"bodySize":219,"comment":""},"cache":{},"timings":{"blocked":0,"dns":-1,"connect":0,"send":70,"wait":0,"receive":70,"ssl":0,"comment":""},"serverIPAddress":"10.0.0.1","connection":"1370031911870255000","comment":""}],"comment":""}};

      head.js(
        '//cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.5/angular.min.js',
        '//cdnjs.cloudflare.com/ajax/libs/d3/3.1.6/d3.min.js',
        'https://raw.github.com/jiahuang/d3-timeline/master/src/d3-timeline.js'
      );

      Array.prototype.max = function() { return this.reduce(function (a, b) { return (a > b ? a : b); }); }
      Array.prototype.min = function() { return this.reduce(function (a, b) { return (a < b ? a : b); }); }
      
      head.ready(function() {

        var width = 1200;

        var startTime = har.log.entries.map(function(e) { return Date.parse(e.startedDateTime); }).min();
        var endTime = har.log.entries.map(function(e) { return Date.parse(e.startedDateTime) + e.time; }).max();

        var data = har.log.entries.map(function(e) {
          var start = Date.parse(e.startedDateTime);
          return { label: e.connection, times: [{ starting_time: start, ending_time: start + e.time }] };
        }).sort(function(a, b) {
          return a.times[0].starting_time - b.times[0].starting_time;
        });

        var chart = d3.timeline()
          .beginning(startTime)
          .ending(endTime)
          .stack()
          .margin({left:150, right:30, top:0, bottom:0});
        var svg = d3.select("#timeline").append("svg").datum(data).attr('width', width).call(chart);

        /*angular.module('har-view', [])
        .directive('harTimeline', function() {

        })
        .controller('HarViewCtrl', function() {

        });

        angular.element(document).ready(function() {
          angular.bootstrap(document, ['har-view']);
        });*/

      });

    </script>

    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.1.0/base-min.css">


  </head>
  <body ng-controller="HarViewCtrl">

    <div id="timeline" har-timeline="data"></div>

    <div id="scrolled_date"></div>

  </body>

</html>